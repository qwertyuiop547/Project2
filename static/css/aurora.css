/* ULTRA OPTIMIZED AURORA - Maximum Performance, Still Beautiful */

.aurora-container {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  z-index: -1;
  pointer-events: none;
  overflow: hidden;
  transform: translateZ(0);
  backface-visibility: hidden;
  will-change: auto;
  contain: strict;
  opacity: 0.85; /* Reduce overall intensity for performance */
}

.aurora-background {
  position: fixed !important;
  inset: 0 !important; /* ensures full cover at any zoom */
  width: 100vw !important;
  height: 100vh !important;
  min-width: 100vw !important;
  min-height: 100vh !important;
  max-width: 100vw !important;
  max-height: 100vh !important;
  z-index: 0 !important; /* content uses z-index:10 in custom.css */
  pointer-events: none !important;
  overflow: hidden !important;
  opacity: 1 !important; /* Ensure Aurora is always visible, not black */
  background: transparent !important; /* No black background */
  /* Ensure it covers everything even when zoomed */
  transform: scale(1.1) translateZ(0);
  transform-origin: center center;
  background:
    /* soft vertical tint - brighter and more consistent all the way down */
    linear-gradient(
      to bottom,
      rgba(102,126,234,0.26) 0%,
      rgba(102,126,234,0.20) 25%,
      rgba(118,75,162,0.22) 55%,
      rgba(102,126,234,0.22) 80%,
      rgba(118,75,162,0.24) 100%
    ),
    /* base gradient: keep the bottom colorful instead of flat black so it "fits" even at low zoom */
    radial-gradient(
      ellipse at center,
      #1f2937 0%,
      #0b1120 55%,
      #020617 100%
    );
  transform: translateZ(0);
  backface-visibility: hidden;
}

/* Simplified starfield - Static for performance with more bottom coverage */
.aurora-background::before {
  content: '';
  position: absolute;
  width: 100%;
  height: 100%;
  background-image: 
    /* Top stars */
    radial-gradient(1px 1px at 12% 18%, rgba(255,255,255,0.8), transparent),
    radial-gradient(2px 2px at 38% 22%, rgba(255,255,255,0.7), transparent),
    radial-gradient(1px 1px at 68% 15%, rgba(255,255,255,0.6), transparent),
    radial-gradient(1px 1px at 88% 25%, rgba(200,220,255,0.5), transparent),
    /* Middle stars */
    radial-gradient(2px 2px at 22% 45%, rgba(255,240,200,0.6), transparent),
    radial-gradient(1px 1px at 52% 38%, rgba(255,255,255,0.7), transparent),
    radial-gradient(1px 1px at 78% 48%, rgba(220,200,255,0.5), transparent),
    radial-gradient(2px 2px at 15% 68%, rgba(255,255,255,0.8), transparent),
    /* Bottom stars for better coverage */
    radial-gradient(1px 1px at 35% 75%, rgba(255,255,255,0.7), transparent),
    radial-gradient(2px 2px at 65% 82%, rgba(200,220,255,0.6), transparent),
    radial-gradient(1px 1px at 45% 88%, rgba(255,240,200,0.7), transparent),
    radial-gradient(1px 1px at 85% 78%, rgba(220,200,255,0.6), transparent),
    radial-gradient(2px 2px at 25% 92%, rgba(255,255,255,0.8), transparent);
  background-size: 100% 100%;
  opacity: 0.7;
  transform: translateZ(0);
  /* Removed animation for performance */
}

/* Bottom glow to ensure visibility at bottom of page */
.aurora-background::after {
  content: '';
  position: absolute;
  inset: 0;
  background:
    /* Multiple bottom gradients for better coverage */
    radial-gradient(150% 150% at 50% 80%, rgba(102,126,234,0.25), transparent 60%),
    radial-gradient(140% 140% at 50% 100%, rgba(139,92,246,0.22), transparent 65%),
    radial-gradient(130% 130% at 50% 120%, rgba(118,75,162,0.20), transparent 70%),
    /* Add side glows for full coverage */
    radial-gradient(80% 100% at 0% 70%, rgba(102,126,234,0.12), transparent 50%),
    radial-gradient(80% 100% at 100% 70%, rgba(118,75,162,0.12), transparent 50%);
  opacity: 0.8;
  pointer-events: none;
}
/* Optimized: Use will-change and transform for better performance */
#aurora-background {
    will-change: transform, opacity;
    transform: translateZ(0); /* Force GPU acceleration */
    contain: layout style paint; /* CSS containment for better performance */
    isolation: isolate; /* Create new stacking context */
}

/* Optimized: Reduce repaints on particles */
.aurora-particle {
    will-change: transform, opacity;
    contain: layout style paint;
}

/* Single simplified aurora layer */
#aurora-layer-1 {
  position: absolute;
  width: 300%;
  height: 300%;
  top: -100%;
  left: -100%;
  background: 
    radial-gradient(ellipse 1200px 800px at 20% 40%, rgba(74,222,128,0.3) 0%, transparent 60%),
    radial-gradient(ellipse 1000px 1000px at 80% 30%, rgba(139,92,246,0.35) 0%, transparent 60%);
  animation: aurora-simple-1 25s ease-in-out infinite;
  mix-blend-mode: screen;
  transform: translateZ(0);
  backface-visibility: hidden;
}

@keyframes aurora-simple-1 {
  0%, 100% { transform: translate(0%, 0%) scale(1); opacity: 0.6; }
  50% { transform: translate(-3%, 2%) scale(1.05); opacity: 0.8; }
}

/* Second simplified aurora layer */
#aurora-layer-2 {
  position: absolute;
  width: 300%;
  height: 300%;
  top: -100%;
  left: -100%;
  background: 
    radial-gradient(ellipse 1100px 900px at 60% 50%, rgba(99,102,241,0.28) 0%, transparent 60%);
  animation: aurora-simple-2 30s ease-in-out infinite reverse;
  mix-blend-mode: screen;
  transform: translateZ(0);
  backface-visibility: hidden;
}

@keyframes aurora-simple-2 {
  0%, 100% { transform: translate(0%, 0%) scale(1); opacity: 0.5; }
  50% { transform: translate(2%, -3%) scale(1.05); opacity: 0.7; }
}

/* Particle styles */
.aurora-particle {
  position: absolute;
  border-radius: 50%;
  pointer-events: none;
  opacity: 0;
  animation: particle-rise 20s ease-in-out forwards;
  filter: blur(1px);
  transform: translateZ(0);
  backface-visibility: hidden;
}

@keyframes particle-rise {
  0% {
    transform: translateY(100vh) translateX(0);
    opacity: 0;
  }
  10% {
    opacity: 1;
  }
  90% {
    opacity: 1;
  }
  100% {
    transform: translateY(-20vh) translateX(var(--drift, 50px));
    opacity: 0;
  }
}

/* Particle shapes */
.particle-circle {
  border-radius: 50%;
}

.particle-diamond {
  border-radius: 0;
  transform: rotate(45deg);
}

.particle-star {
  clip-path: polygon(
    50% 0%,
    61% 35%,
    98% 35%,
    68% 57%,
    79% 91%,
    50% 70%,
    21% 91%,
    32% 57%,
    2% 35%,
    39% 35%
  );
}

/* Shooting star */
.shooting-star {
  position: absolute;
  width: 3px;
  height: 3px;
  background: white;
  border-radius: 50%;
  box-shadow: 0 0 4px 1px rgba(255, 255, 255, 0.8);
  animation: shoot 1s ease-out forwards;
  transform: translateZ(0);
  backface-visibility: hidden;
}

@keyframes shoot {
  0% {
    transform: translateX(0) translateY(0);
    opacity: 1;
  }
  100% {
    transform: translateX(300px) translateY(150px);
    opacity: 0;
  }
}

.shooting-star::before {
  content: '';
  position: absolute;
  top: 0;
  right: 3px;
  width: 50px;
  height: 1px;
  background: linear-gradient(to left, rgba(255, 255, 255, 0.8), transparent);
}

/* Comet variant */
.shooting-star.comet {
  width: 4px;
  height: 4px;
  box-shadow: 0 0 8px 2px rgba(139, 92, 246, 0.9);
}

.shooting-star.comet::before {
  width: 80px;
  background: linear-gradient(to left, rgba(139, 92, 246, 0.8), transparent);
}

/* Vignette overlay - lightweight */
#vignette-overlay {
  position: absolute;
  width: 100%;
  height: 100%;
  background: radial-gradient(ellipse at center, transparent 30%, rgba(0, 0, 0, 0.7) 100%);
  pointer-events: none;
  transform: translateZ(0);
}

/* Hide other layers for performance */
#aurora-layer-3,
#nebula-layer,
#glow-orbs,
#color-shift,
#light-beams,
#gradient-flow,
#light-shimmer,
#constellation-layer,
#starfield {
  display: none !important;
}
